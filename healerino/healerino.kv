#:import FadeTransition kivy.uix.screenmanager.FadeTransition

ScreenManager:
    transition: FadeTransition()

    # WelcomeScreen  #FIXME
    CombatScreen


<WelcomeScreen>:
    name: 'welcome_screen'

    AnchorLayout:
        anchor_x: 'center'

        BoxLayout:
            orientation: 'vertical'
            size_hint: (0.5, 1)
            spacing: 10

            Label:
                size_hint_y: .4
                text: "Healerino"
                valign: 'bottom'
                bold: True
                font_size: 50
                padding: 0, 0

            AnchorLayout:
                anchor_x: 'center'
                size_hint_y: .6

                BoxLayout:
                    size_hint: .5, .5
                    orientation: 'vertical'
                    spacing: 10

                    Button:
                        halign: 'center'
                        valign: 'middle'
                        text: "Play"
                        on_release: root.manager.current = 'combat_screen'

                    # TODO add Options
                    # Button:
                    #     halign: 'center'
                    #     valign: 'middle'
                    #     text: "Options"


<CombatScreen>:
    name: 'combat_screen'

    combat: combat_widget_id

    CombatWidget:
        id: combat_widget_id

    # player: player

    # BoxLayout:
    #     orientation: 'vertical'

    #     Button:
    #         on_release: app.root.current = 'main'

    #     BossWidget

    #     ProgressBar:
    #         id: cooldown_indicator
    #         value: 0

    #     PlayerWidget:
    #         id: player


<PlayerWidget>:

    SpellWidget:
        id: spell_slot_1

    BoxLayout:
        orientation: 'horizontal'
        size: root.size

        Label:
            text: "Mana:"

        ProgressBar:
            id: manabar
            value: root.mana



<Portrait@BoxLayout>:
    orientation: 'vertical'

    # canvas.before:
    #     Color:
    #         rgba: 0, 1, 0, .5
    #     Rectangle:
    #         pos: root.pos
    #         size: root.size

    # Widget

    Label:
        text: "NAME"
        text_size: root.width, None
        size_hint: (None, None)
        size: self.texture_size
        halign: 'left'
        valign: 'middle'

        # canvas.before:
        #     Color:
        #         rgba: 1, 1, 1, .2
        #     Rectangle:
        #         pos: root.pos
        #         size: root.size

    ProgressBar:
        size_hint_y: None
        height: '40 dp'
        value: 100

    # Widget


<BossWidget@FloatLayout>:

    # canvas.before:
    #     Color:
    #         rgba: 1, 0, 0, 1
    #     Rectangle:
    #         pos: root.pos
    #         size: root.size

    Portrait:
        pos_hint: {'center_x': 0.5, 'top': 1.0}
        size_hint: (.8, 1)
        # height: '50 dp'
